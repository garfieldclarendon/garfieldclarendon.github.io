\hypertarget{class_a_p_i_route}{}\section{A\+P\+I\+Route Class Reference}
\label{class_a_p_i_route}\index{A\+P\+I\+Route@{A\+P\+I\+Route}}


A\+PI handler class for a L\+CS Route.  




{\ttfamily \#include $<$A\+P\+I\+Route.\+h$>$}

Inheritance diagram for A\+P\+I\+Route\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_a_p_i_route}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_a_p_i_route_a23f1b30a95e806760968daf23e2b3fa1}{handle\+Activate\+Route\+Url} (const \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} \&request, \hyperlink{class_a_p_i_response}{A\+P\+I\+Response} $\ast$response)
\item 
void \hyperlink{class_a_p_i_route_a2edf94cf41f8fba5b1ed5f5eca217968}{handle\+Lock\+Route\+Url} (const \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} \&request, \hyperlink{class_a_p_i_response}{A\+P\+I\+Response} $\ast$response)
\item 
void \hyperlink{class_a_p_i_route_a62f9b2e4addb8b60087a02a3e93c1abf}{handle\+Get\+Route\+List} (const \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} \&request, \hyperlink{class_a_p_i_response}{A\+P\+I\+Response} $\ast$response)
\item 
void \hyperlink{class_a_p_i_route_a95f38f3fb39801deba8d4a39e14686d2}{handle\+Get\+Route\+Entry\+List} (const \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} \&request, \hyperlink{class_a_p_i_response}{A\+P\+I\+Response} $\ast$response)
\item 
void \hyperlink{class_a_p_i_route_a2ddf0d77318dcb66acc7d754c81151b3}{device\+Status\+Changed} (int device\+ID, int status, bool locked)
\item 
bool \hyperlink{class_a_p_i_route_afbd5b3b86ddacee31d16330de4d069df}{is\+Route\+Active} (int route\+ID)
\item 
\mbox{\Hypertarget{class_a_p_i_route_a78e979b1ae56db76fb77de3cb8e54da9}\label{class_a_p_i_route_a78e979b1ae56db76fb77de3cb8e54da9}} 
bool \hyperlink{class_a_p_i_route_a78e979b1ae56db76fb77de3cb8e54da9}{is\+Route\+Locked} (int route\+ID)
\begin{DoxyCompactList}\small\item\em Returns true of the given route is currently locked. \end{DoxyCompactList}\item 
bool \hyperlink{class_a_p_i_route_ab02063d3a9335d9e3e3ad9160dbb626b}{can\+Route\+Lock} (int route\+ID)
\begin{DoxyCompactList}\small\item\em Returns true of the given route can be locked. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_a_p_i_route_ad9db78abae10c20cbbec86378ba94db3}\label{class_a_p_i_route_ad9db78abae10c20cbbec86378ba94db3}} 
void \hyperlink{class_a_p_i_route_ad9db78abae10c20cbbec86378ba94db3}{send\+Notification\+Message} (const Q\+String \&url, const Q\+Json\+Object \&obj)
\begin{DoxyCompactList}\small\item\em Notifies interested parties that a route\textquotesingle{}s status or lock state has changed. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_a_p_i_route_ada8e5c770e397fc6ed6602bdbb670a29}{A\+P\+I\+Route} (Q\+Object $\ast$parent=nullptr)
\item 
void \hyperlink{class_a_p_i_route_ac110d1999b3afe409d6e341fb9ab06d6}{activate\+Route} (int route\+ID)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{class_a_p_i_route_af7d8f762fc9a692118fb222ab1aa89a3}\label{class_a_p_i_route_af7d8f762fc9a692118fb222ab1aa89a3}} 
static \hyperlink{class_a_p_i_route}{A\+P\+I\+Route} $\ast$ \hyperlink{class_a_p_i_route_af7d8f762fc9a692118fb222ab1aa89a3}{instance} (void)
\begin{DoxyCompactList}\small\item\em Singleton function which returns a pointer the one and only instance. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
A\+PI handler class for a L\+CS Route. 

\{get\} /api/activate\+\_\+route\+:route\+ID Activate Route  Activate\+Route  Route

\{Number\} route\+ID The id of the route to activate.  Activates the specified route. A route aligns one or more turnout devices to a specific direction (normal or thrown). This allows a single command/button to set the alignment for a train to a specific track without having to set each turnout individulally.  Example usage\+: \href{http://localhost:8080/api/activate_route?routeID=6}{\tt http\+://localhost\+:8080/api/activate\+\_\+route?route\+I\+D=6}  \{get\} /api/lock\+\_\+route\+:route\+ID,lock Lock Route  Lock\+Route  Route

\{Number\} route\+ID The id of the route to lock.  \{Number=0,1\} lock Lock flag. 0 = Unlock, 1 = Lock.  Activates and locks the specified route. Locking a route locks all turnouts in the route\textquotesingle{}s list. The route must be unlocked in in order to activate any turnouts assigned to this route.  Example usage\+: \href{http://localhost:8080/api/lock_route?routeID=6}{\tt http\+://localhost\+:8080/api/lock\+\_\+route?route\+I\+D=6}  \{get\} /api/route\+\_\+list\+: Route List  Route\+List  Route

Returns a list of all routes and the routes current state.  \{Number\} can\+Lock Flag indicating if the route can be locked.  \{Number\} is\+Active Flag indicating if the route is currently active.  \{Number\} is\+Locked Flag indicating if the route is currently locked.  \{String\} route\+Description Route\textquotesingle{}s description.  \{Number\} route\+ID Route\textquotesingle{}s ID.  \{String\} route\+Name Route\textquotesingle{}s name.  Example usage\+: \href{http://localhost:8080/api/route_list}{\tt http\+://localhost\+:8080/api/route\+\_\+list}  \{json\} Success-\/\+Response\+: H\+T\+T\+P/1.\+1 200 OK \mbox{[}\{ \char`\"{}can\+Lock\char`\"{}\+: true, \char`\"{}is\+Active\char`\"{}\+: false, \char`\"{}is\+Locked\char`\"{}\+: false, \char`\"{}route\+Description\char`\"{}\+: \char`\"{}\+To Mine\char`\"{}, \char`\"{}route\+I\+D\char`\"{}\+: \char`\"{}7\char`\"{}, \char`\"{}route\+Name\char`\"{}\+: \char`\"{}\+C\+A 1\char`\"{} \}, \{ \char`\"{}can\+Lock\char`\"{}\+: true, \char`\"{}is\+Active\char`\"{}\+: false, \char`\"{}is\+Locked\char`\"{}\+: false, \char`\"{}route\+Description\char`\"{}\+: \char`\"{}\+West X-\/\+Over 2 (\+Restore)\char`\"{}, \char`\"{}route\+I\+D\char`\"{}\+: \char`\"{}16\char`\"{}, \char`\"{}route\+Name\char`\"{}\+: \char`\"{}\+C\+A 10\char`\"{} \} \mbox{]}  \{get\} /api/route\+\_\+entry\+\_\+list\+:route\+ID Route Entry List  Route\+Entry\+List  Route

\{Number\} route\+ID ID of the route.  Returns a list route entries which define the turnouts that are set when the route is activated.  \{Number\} device\+ID device\+ID of the turnout.  \{Number\} route\+Entry\+ID route\+Entry\textquotesingle{}s ID field.  \{Number\} route\+ID route\+ID of the route the entry is assigned to.  \{Number=1,3\} turnout\+State The state the turnout is to be set to when the route is activated. 1 = Normal, 3 = Diverging (thrown)  Example usage\+: \href{http://localhost:8080/api/route_entry_list?routeID=16}{\tt http\+://localhost\+:8080/api/route\+\_\+entry\+\_\+list?route\+I\+D=16}  \{json\} Success-\/\+Response\+: H\+T\+T\+P/1.\+1 200 OK \mbox{[}\{ \char`\"{}device\+I\+D\char`\"{}\+: \char`\"{}15\char`\"{}, \char`\"{}route\+Entry\+I\+D\char`\"{}\+: \char`\"{}23\char`\"{}, \char`\"{}route\+I\+D\char`\"{}\+: \char`\"{}16\char`\"{}, \char`\"{}turnout\+State\char`\"{}\+: \char`\"{}1\char`\"{} \}, \{ \char`\"{}device\+I\+D\char`\"{}\+: \char`\"{}16\char`\"{}, \char`\"{}route\+Entry\+I\+D\char`\"{}\+: \char`\"{}24\char`\"{}, \char`\"{}route\+I\+D\char`\"{}\+: \char`\"{}16\char`\"{}, \char`\"{}turnout\+State\char`\"{}\+: \char`\"{}1\char`\"{} \} \mbox{]}  \{get\} /api/notification/route Route Status Change  Route\+Status\+Change\+Notification  A\+P\+I\+Notifications  off

Notification message sent when a route\textquotesingle{}s state changes.  \{String\} url Notification url.  \{Number\} route\+ID Route\textquotesingle{}s ID.  \{Number=0,1\} is\+Active Flag indicating if the route is active. 0 = not active, 1 = active.  \{Number=0,1\} is\+Locked Flag indicating if the route is currently locked. 0 = not locked, 1 = locked  \{Number=0,1\} can\+Lock Flag indicating if the lock is allowed to be locked. 0 = cannot be locked, 1 = can be locked. If any of the turnouts contained in the route are currently in a locked state, the route cannot be locked.  \{json\} Success-\/\+Response\+: \{ \char`\"{}url\char`\"{}\+: \char`\"{}/api/notification/route\char`\"{}, \char`\"{}route\+I\+D\char`\"{}\+: \char`\"{}16\char`\"{}, \char`\"{}is\+Active\char`\"{}\+: \char`\"{}1\char`\"{}, \char`\"{}is\+Locked\char`\"{}\+: \char`\"{}0\char`\"{}, \char`\"{}can\+Lock\char`\"{}\+: \char`\"{}0\char`\"{} \}\hyperlink{class_a_p_i_route}{A\+P\+I\+Route} This class handles all A\+PI requests for a route. A route aligns one or more turnout devices to a specific direction (normal or thrown). This allows a single command/button to set the alignment for a train to a specific track without having to set each turnout individulally. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_a_p_i_route_ada8e5c770e397fc6ed6602bdbb670a29}\label{class_a_p_i_route_ada8e5c770e397fc6ed6602bdbb670a29}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{A\+P\+I\+Route()}{APIRoute()}}
{\footnotesize\ttfamily A\+P\+I\+Route\+::\+A\+P\+I\+Route (\begin{DoxyParamCaption}\item[{Q\+Object $\ast$}]{parent = {\ttfamily nullptr} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}

Contstructor Creates a device A\+PI handler. The constructor registers a \hyperlink{class_url_handler}{Url Handler} objects. See the A\+PI documentation for information on the U\+RL\textquotesingle{}s handled by this class. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_a_p_i_route_ac110d1999b3afe409d6e341fb9ab06d6}\label{class_a_p_i_route_ac110d1999b3afe409d6e341fb9ab06d6}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!activate\+Route@{activate\+Route}}
\index{activate\+Route@{activate\+Route}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{activate\+Route()}{activateRoute()}}
{\footnotesize\ttfamily void A\+P\+I\+Route\+::activate\+Route (\begin{DoxyParamCaption}\item[{int}]{route\+ID }\end{DoxyParamCaption})}

Activeates a route. 
\begin{DoxyParams}{Parameters}
{\em int} & id fo the route to activate. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a_p_i_route_ab02063d3a9335d9e3e3ad9160dbb626b}\label{class_a_p_i_route_ab02063d3a9335d9e3e3ad9160dbb626b}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!can\+Route\+Lock@{can\+Route\+Lock}}
\index{can\+Route\+Lock@{can\+Route\+Lock}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{can\+Route\+Lock}{canRouteLock}}
{\footnotesize\ttfamily bool A\+P\+I\+Route\+::can\+Route\+Lock (\begin{DoxyParamCaption}\item[{int}]{route\+ID }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [slot]}}



Returns true of the given route can be locked. 

When a route is locked, all other routes that share one or more turnouts are added to the m\+\_\+exclude\+Routes list. \mbox{\Hypertarget{class_a_p_i_route_a2ddf0d77318dcb66acc7d754c81151b3}\label{class_a_p_i_route_a2ddf0d77318dcb66acc7d754c81151b3}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!device\+Status\+Changed@{device\+Status\+Changed}}
\index{device\+Status\+Changed@{device\+Status\+Changed}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{device\+Status\+Changed}{deviceStatusChanged}}
{\footnotesize\ttfamily void A\+P\+I\+Route\+::device\+Status\+Changed (\begin{DoxyParamCaption}\item[{int}]{device\+ID,  }\item[{int}]{status,  }\item[{bool}]{locked }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Monitors the \hyperlink{class_device_manager}{Device\+Manager} for device status changes 
\begin{DoxyParams}{Parameters}
{\em device\+ID} & int Device ID of the device. \\
\hline
{\em status} & int The device\textquotesingle{}s new status. \\
\hline
{\em locked} & int The device\textquotesingle{}s new locked state. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a_p_i_route_a23f1b30a95e806760968daf23e2b3fa1}\label{class_a_p_i_route_a23f1b30a95e806760968daf23e2b3fa1}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!handle\+Activate\+Route\+Url@{handle\+Activate\+Route\+Url}}
\index{handle\+Activate\+Route\+Url@{handle\+Activate\+Route\+Url}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{handle\+Activate\+Route\+Url}{handleActivateRouteUrl}}
{\footnotesize\ttfamily void A\+P\+I\+Route\+::handle\+Activate\+Route\+Url (\begin{DoxyParamCaption}\item[{const \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} \&}]{request,  }\item[{\hyperlink{class_a_p_i_response}{A\+P\+I\+Response} $\ast$}]{response }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

A\+PI \char`\"{}/api/activate\+\_\+route\char`\"{} Activates a route. 
\begin{DoxyParams}{Parameters}
{\em request} & \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} containing the url of the request including the route\textquotesingle{}s ID. \\
\hline
{\em response} & \hyperlink{class_a_p_i_response}{A\+P\+I\+Response} unused. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a_p_i_route_a95f38f3fb39801deba8d4a39e14686d2}\label{class_a_p_i_route_a95f38f3fb39801deba8d4a39e14686d2}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!handle\+Get\+Route\+Entry\+List@{handle\+Get\+Route\+Entry\+List}}
\index{handle\+Get\+Route\+Entry\+List@{handle\+Get\+Route\+Entry\+List}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{handle\+Get\+Route\+Entry\+List}{handleGetRouteEntryList}}
{\footnotesize\ttfamily void A\+P\+I\+Route\+::handle\+Get\+Route\+Entry\+List (\begin{DoxyParamCaption}\item[{const \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} \&}]{request,  }\item[{\hyperlink{class_a_p_i_response}{A\+P\+I\+Response} $\ast$}]{response }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

A\+PI \char`\"{}/api/route\+\_\+entry\+\_\+list\char`\"{} Downloads a list of all route\+Entries for a given route ID. 
\begin{DoxyParams}{Parameters}
{\em request} & \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} containing the url of the request including the routes ID. \\
\hline
{\em response} & \hyperlink{class_a_p_i_response}{A\+P\+I\+Response} with the payload set to the list of route\+Entries in J\+S\+ON format. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a_p_i_route_a62f9b2e4addb8b60087a02a3e93c1abf}\label{class_a_p_i_route_a62f9b2e4addb8b60087a02a3e93c1abf}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!handle\+Get\+Route\+List@{handle\+Get\+Route\+List}}
\index{handle\+Get\+Route\+List@{handle\+Get\+Route\+List}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{handle\+Get\+Route\+List}{handleGetRouteList}}
{\footnotesize\ttfamily void A\+P\+I\+Route\+::handle\+Get\+Route\+List (\begin{DoxyParamCaption}\item[{const \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} \&}]{request,  }\item[{\hyperlink{class_a_p_i_response}{A\+P\+I\+Response} $\ast$}]{response }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

A\+PI \char`\"{}/api/route\+\_\+list\char`\"{} Downloads a list of all routes. 
\begin{DoxyParams}{Parameters}
{\em request} & \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} containing the url of the request. \\
\hline
{\em response} & \hyperlink{class_a_p_i_response}{A\+P\+I\+Response} with the payload set to the list of routes in J\+S\+ON format. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a_p_i_route_a2edf94cf41f8fba5b1ed5f5eca217968}\label{class_a_p_i_route_a2edf94cf41f8fba5b1ed5f5eca217968}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!handle\+Lock\+Route\+Url@{handle\+Lock\+Route\+Url}}
\index{handle\+Lock\+Route\+Url@{handle\+Lock\+Route\+Url}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{handle\+Lock\+Route\+Url}{handleLockRouteUrl}}
{\footnotesize\ttfamily void A\+P\+I\+Route\+::handle\+Lock\+Route\+Url (\begin{DoxyParamCaption}\item[{const \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} \&}]{request,  }\item[{\hyperlink{class_a_p_i_response}{A\+P\+I\+Response} $\ast$}]{response }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

A\+PI \char`\"{}/api/lock\+\_\+route\char`\"{} Activates and locks a route. Once locked, turnouts assigned to the route remain locked until this function is called again with the lock parameter set to lock=0. 
\begin{DoxyParams}{Parameters}
{\em request} & \hyperlink{class_a_p_i_request}{A\+P\+I\+Request} containing the url of the request including the route\textquotesingle{}s ID and the lock flag set to either 0 = unlock or 1 = lock. \\
\hline
{\em response} & \hyperlink{class_a_p_i_response}{A\+P\+I\+Response} unused. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_a_p_i_route_afbd5b3b86ddacee31d16330de4d069df}\label{class_a_p_i_route_afbd5b3b86ddacee31d16330de4d069df}} 
\index{A\+P\+I\+Route@{A\+P\+I\+Route}!is\+Route\+Active@{is\+Route\+Active}}
\index{is\+Route\+Active@{is\+Route\+Active}!A\+P\+I\+Route@{A\+P\+I\+Route}}
\subsubsection{\texorpdfstring{is\+Route\+Active}{isRouteActive}}
{\footnotesize\ttfamily bool A\+P\+I\+Route\+::is\+Route\+Active (\begin{DoxyParamCaption}\item[{int}]{route\+ID }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}

Returns true of the given route is currently active. A route is considered active if all turnouts are set to the direction defined in the route\textquotesingle{}s route\+Entry list. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
L\+C\+S\+Server/A\+P\+I\+Route.\+h\item 
L\+C\+S\+Server/A\+P\+I\+Route.\+cpp\end{DoxyCompactItemize}
